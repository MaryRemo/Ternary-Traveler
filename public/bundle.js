(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const editForm = {
  createEditForm(travelToEdit) {
    let travelNameField = document.createElement("p");
    let travelNameLabels = document.createElement("label");
    travelNameLabels.textContent = "Cost";
    let travelNameInput = document.createElement("input");
    travelNameInput.value = travelToEdit.cost;
    travelNameField.appendChild(travelNameLabels);
    travelNameField.appendChild(travelNameInput);
    let travelReviewField = document.createElement("p");
    let travelReviewLabel = document.createElement("label");
    travelReviewLabel.textContent = "Review";
    let travelReviewInput = document.createElement("input");
    travelReviewInput.value = travelToEdit.review;
    travelReviewField.appendChild(travelReviewLabel);
    travelReviewField.appendChild(travelReviewInput);
    let updateButton = document.createElement("button");
    updateButton.textContent = "Update";
    updateButton.addEventListener("click", () => {
      let editedEvents = {
        cost: travelNameInput.value,
        review: travelReviewInput.value
      };

      _travelerCollection.default.editTravels(travelToEdit.id, editedEvents).then(response => {
        _travelerList.default.listing();

        console.log(response);
        let travelItemArticle = document.querySelector(".displayTravels");
        travelItemArticle.innerHTML = "";
      });
    });
    let eventItemArticle = document.querySelector(".displayTravels"); // while (eventItemArticle.firstChild) {
    //     eventItemArticle.removeChild(eventItemArticle.firstChild)
    // }

    eventItemArticle.innerHTML = "", eventItemArticle.appendChild(travelNameField);
    eventItemArticle.appendChild(travelReviewField);
    eventItemArticle.appendChild(updateButton);
  }

};
var _default = editForm;
exports.default = _default;

},{"./travelerCollection":3,"./travelerList":5}],2:[function(require,module,exports){
"use strict";

var _travelerDomBuilder = _interopRequireDefault(require("./travelerDomBuilder"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_travelerDomBuilder.default.travelBuilding();

_travelerList.default.listing();

},{"./travelerDomBuilder":4,"./travelerList":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const travelerCollection = {
  getAllTravels() {
    return fetch("http://localhost:8088/interests").then(response => response.json());
  },

  postAllTravels(travelToSave) {
    return fetch("http://localhost:8088/interests", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(travelToSave)
    });
  },

  deleteTravels(travelId) {
    return fetch(`http://localhost:8088/interests/${travelId}`, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json"
      }
    });
  },

  getTravel(travelId) {
    return fetch(`http://localhost:8088/interests/${travelId}`).then(response => response.json());
  },

  editTravels(travelId, eventToEdit) {
    return fetch(`http://localhost:8088/interests/${travelId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(eventToEdit)
    });
  }

};
var _default = travelerCollection;
exports.default = _default;

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const travelBuilder = {
  travelBuilding() {
    //      Dropdown to pick which place the point of interest is located in
    let eventHeader = document.createElement("h2");
    eventHeader.textContent = "Ternary Traveler";
    eventHeader.setAttribute("id", "formTravel_id"); // Name of the point of interest

    let travelField = document.createElement("fieldset");
    let travelNameLabel = document.createElement("label");
    travelNameLabel.setAttribute("for", "travel__name");
    let inputTravel = document.createElement("input");
    inputTravel.setAttribute("id", "travelName");
    inputTravel.placeholder = "Name";
    inputTravel.setAttribute("name", "travel-name");
    travelField.appendChild(travelNameLabel);
    travelField.appendChild(inputTravel); // Description of the point of interest

    let descriptionField = document.createElement("fieldset");
    let descriptionLabel = document.createElement("label");
    descriptionLabel.setAttribute("for", "description");
    let inputDescription = document.createElement("input");
    inputDescription.setAttribute("id", "description");
    inputDescription.placeholder = "Description";
    inputDescription.setAttribute("name", "description");
    descriptionField.appendChild(descriptionLabel);
    descriptionField.appendChild(inputDescription); // Cost of visiting the point of interest

    let costField = document.createElement("fieldset");
    let costLabel = document.createElement("label");
    costLabel.setAttribute("for", "cost");
    let inputCost = document.createElement("input");
    inputCost.setAttribute("id", "cost");
    inputCost.placeholder = "Cost";
    inputCost.setAttribute("name", "cost");
    costField.appendChild(costLabel);
    costField.appendChild(inputCost);
    let placeField = document.createElement("fieldset");
    let placeLabel = document.createElement("select");
    placeLabel.setAttribute("for", "countries");
    placeLabel.setAttribute("id", "place");
    placeField.appendChild(placeLabel);
    placeLabel.appendChild(new Option("Italy", "Italy"));
    placeLabel.appendChild(new Option("Switzerland", "Switzerland"));
    placeLabel.appendChild(new Option("France", "France"));
    let submitButton = document.createElement("button");
    submitButton.textContent = "Add Travel";
    submitButton.setAttribute("class", "travel-save");
    submitButton.addEventListener("click", this.handleAddNewTravel);
    let travelFormFragment = document.createDocumentFragment();
    travelFormFragment.appendChild(eventHeader);
    travelFormFragment.appendChild(travelField);
    travelFormFragment.appendChild(descriptionField);
    travelFormFragment.appendChild(costField);
    travelFormFragment.appendChild(placeField);
    travelFormFragment.appendChild(submitButton);
    let formArticle = document.querySelector(".output");
    formArticle.appendChild(travelFormFragment);
    return inputTravel;
  },

  handleAddNewTravel() {
    let inputName = document.querySelector("#travelName").value;
    let inputTravelDescription = document.querySelector("#description").value;
    let inputTravelCost = document.querySelector("#cost").value;
    let inputTravelPlace = document.querySelector("#place").value;
    console.log(inputTravelDescription);
    let newTravel = {
      name: inputName,
      description: inputTravelDescription,
      cost: inputTravelCost,
      place: inputTravelPlace
    };

    _travelerCollection.default.postAllTravels(newTravel).then(response => {
      _travelerList.default.listing();

      console.log(response);
    });
  }

};
var _default = travelBuilder;
exports.default = _default;

},{"./travelerCollection":3,"./travelerList":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travels = _interopRequireDefault(require("./travels"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const travelerList = {
  listing() {
    _travelerCollection.default.getAllTravels().then(allTravels => {
      let eventDocFragment = document.createDocumentFragment();
      allTravels.forEach(travelItem => {
        let travelHTML = _travels.default.creatingTravels(travelItem);

        eventDocFragment.appendChild(travelHTML);
        console.log(allTravels);
      });
      let outputArticle = document.querySelector(".displayTravels");

      while (outputArticle.firstChild) {
        outputArticle.removeChild(outputArticle.firstChild);
      }

      outputArticle.appendChild(eventDocFragment);
    });
  }

};
var _default = travelerList;
exports.default = _default;

},{"./travelerCollection":3,"./travels":6}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _editForm = _interopRequireDefault(require("./editForm"));

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const createTravels = {
  creatingTravels(travelObject) {
    let travelArticle = document.createElement("fieldset");
    let travelName = document.createElement("h3");
    travelName.textContent = travelObject.name;
    let travelDescription = document.createElement("section");
    travelDescription.textContent = travelObject.description;
    let travelCost = document.createElement("section");
    travelCost.textContent = travelObject.cost;
    let travelPlace = document.createElement("section");
    travelPlace.textContent = travelObject.place;
    let travelReview = document.createElement("section");
    travelReview.textContent = travelObject.review;
    let editButton = document.createElement("button");
    editButton.textContent = "Edit Event";
    editButton.setAttribute("id", `editEvent--${travelObject.id}`);
    editButton.addEventListener("click", () => {
      let articleID = event.target.id;
      console.log(articleID);
      let eventId = articleID.split("--")[1];
      console.log(eventId);

      _travelerCollection.default.getTravel(eventId).then(response => {
        _editForm.default.createEditForm(response);
      });
    });
    let deleteButton = document.createElement("button");
    deleteButton.textContent = "Delete Event";
    deleteButton.setAttribute("id", `deleteEvent--${travelObject.id}`);
    deleteButton.addEventListener("click", () => {
      console.log(event);
      let travelId = event.target.id.split("--")[1];

      _travelerCollection.default.deleteTravels(travelId).then(response => {
        _travelerList.default.listing();

        console.log(response);
      });
    });
    travelArticle.appendChild(travelName);
    travelArticle.appendChild(travelDescription);
    travelArticle.appendChild(travelCost);
    travelArticle.appendChild(travelPlace);
    travelArticle.appendChild(travelReview);
    travelArticle.appendChild(editButton);
    travelArticle.appendChild(deleteButton);
    return travelArticle;
  }

};
var _default = createTravels;
exports.default = _default;

},{"./editForm":1,"./travelerCollection":3,"./travelerList":5}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL2VkaXRGb3JtLmpzIiwiLi4vc2NyaXB0cy9tYWluLmpzIiwiLi4vc2NyaXB0cy90cmF2ZWxlckNvbGxlY3Rpb24uanMiLCIuLi9zY3JpcHRzL3RyYXZlbGVyRG9tQnVpbGRlci5qcyIsIi4uL3NjcmlwdHMvdHJhdmVsZXJMaXN0LmpzIiwiLi4vc2NyaXB0cy90cmF2ZWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztBQ0FBOztBQUNBOzs7O0FBRUEsTUFBTSxRQUFRLEdBQUc7QUFDYixFQUFBLGNBQWMsQ0FBRSxZQUFGLEVBQWdCO0FBQzFCLFFBQUksZUFBZSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLEdBQXZCLENBQXRCO0FBQ0EsUUFBSSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUF2QjtBQUNBLElBQUEsZ0JBQWdCLENBQUMsV0FBakIsR0FBK0IsTUFBL0I7QUFDQSxRQUFJLGVBQWUsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUF0QjtBQUNBLElBQUEsZUFBZSxDQUFDLEtBQWhCLEdBQXdCLFlBQVksQ0FBQyxJQUFyQztBQUVBLElBQUEsZUFBZSxDQUFDLFdBQWhCLENBQTRCLGdCQUE1QjtBQUNBLElBQUEsZUFBZSxDQUFDLFdBQWhCLENBQTRCLGVBQTVCO0FBRUEsUUFBSSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUF4QjtBQUNBLFFBQUksaUJBQWlCLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBeEI7QUFDQSxJQUFBLGlCQUFpQixDQUFDLFdBQWxCLEdBQWdDLFFBQWhDO0FBQ0EsUUFBSSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUF4QjtBQUNBLElBQUEsaUJBQWlCLENBQUMsS0FBbEIsR0FBMEIs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QWQsQ0FBMEIsVUFBMUI7QUFDQSxJQUFBLGFBQWEsQ0FBQyxXQUFkLENBQTBCLFdBQTFCO0FBQ0EsSUFBQSxhQUFhLENBQUMsV0FBZCxDQUEwQixZQUExQjtBQUNBLElBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsVUFBMUI7QUFDQSxJQUFBLGFBQWEsQ0FBQyxXQUFkLENBQTBCLFlBQTFCO0FBR0ksV0FBTyxhQUFQO0FBQ0g7O0FBeERpQixDQUF0QjtlQTJEZSxhIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IHRyYXZlbGVyQ29sbGVjdGlvbiBmcm9tIFwiLi90cmF2ZWxlckNvbGxlY3Rpb25cIlxuaW1wb3J0IHRyYXZlbGVyTGlzdCBmcm9tIFwiLi90cmF2ZWxlckxpc3RcIlxuXG5jb25zdCBlZGl0Rm9ybSA9IHtcbiAgICBjcmVhdGVFZGl0Rm9ybSAodHJhdmVsVG9FZGl0KSB7XG4gICAgICAgIGxldCB0cmF2ZWxOYW1lRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKVxuICAgICAgICBsZXQgdHJhdmVsTmFtZUxhYmVscyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgICB0cmF2ZWxOYW1lTGFiZWxzLnRleHRDb250ZW50ID0gXCJDb3N0XCJcbiAgICAgICAgbGV0IHRyYXZlbE5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxuICAgICAgICB0cmF2ZWxOYW1lSW5wdXQudmFsdWUgPSB0cmF2ZWxUb0VkaXQuY29zdFxuXG4gICAgICAgIHRyYXZlbE5hbWVGaWVsZC5hcHBlbmRDaGlsZCh0cmF2ZWxOYW1lTGFiZWxzKVxuICAgICAgICB0cmF2ZWxOYW1lRmllbGQuYXBwZW5kQ2hpbGQodHJhdmVsTmFtZUlucHV0KVxuXG4gICAgICAgIGxldCB0cmF2ZWxSZXZpZXdGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIGxldCB0cmF2ZWxSZXZpZXdMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgICB0cmF2ZWxSZXZpZXdMYWJlbC50ZXh0Q29udGVudCA9IFwiUmV2aWV3XCJcbiAgICAgICAgbGV0IHRyYXZlbFJldmlld0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgICAgIHRyYXZlbFJldmlld0lucHV0LnZhbHVlID0gdHJhdmVsVG9FZGl0LnJldmlld1xuXG4gICAgICAgIHRyYXZlbFJldmlld0ZpZWxkLmFwcGVuZENoaWxkKHRyYXZlbFJldmlld0xhYmVsKVxuICAgICAgICB0cmF2ZWxSZXZpZXdGaWVsZC5hcHBlbmRDaGlsZCh0cmF2ZWxSZXZpZXdJbnB1dClcblxuICAgICAgICBsZXQgdXBkYXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICB1cGRhdGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlVwZGF0ZVwiXG5cbiAgICAgICAgdXBkYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgZWRpdGVkRXZlbnRzID0ge1xuICAgICAgICAgICAgICAgIGNvc3Q6IHRyYXZlbE5hbWVJbnB1dC52YWx1ZSxcbiAgICAgICAgICAgICAgICByZXZpZXc6IHRyYXZlbFJldmlld0lucHV0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmF2ZWxlckNvbGxlY3Rpb24uZWRpdFRyYXZlbHModHJhdmVsVG9FZGl0LmlkLCBlZGl0ZWRFdmVudHMpXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgdHJhdmVsZXJMaXN0Lmxpc3RpbmcoKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuXG4gICAgICAgICAgICAgICAgbGV0IHRyYXZlbEl0ZW1BcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaXNwbGF5VHJhdmVsc1wiKVxuICAgICAgICAgICAgICAgIHRyYXZlbEl0ZW1BcnRpY2xlLmlubmVySFRNTCA9IFwiXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBldmVudEl0ZW1BcnRpY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kaXNwbGF5VHJhdmVsc1wiKVxuXG4gICAgICAgIC8vIHdoaWxlIChldmVudEl0ZW1BcnRpY2xlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgLy8gICAgIGV2ZW50SXRlbUFydGljbGUucmVtb3ZlQ2hpbGQoZXZlbnRJdGVtQXJ0aWNsZS5maXJzdENoaWxkKVxuICAgICAgICAvLyB9XG5cbiAgICAgICAgZXZlbnRJdGVtQXJ0aWNsZS5pbm5lckhUTUwgPSBcIlwiLFxuICAgICAgICBldmVudEl0ZW1BcnRpY2xlLmFwcGVuZENoaWxkKHRyYXZlbE5hbWVGaWVsZClcbiAgICAgICAgZXZlbnRJdGVtQXJ0aWNsZS5hcHBlbmRDaGlsZCh0cmF2ZWxSZXZpZXdGaWVsZClcbiAgICAgICAgZXZlbnRJdGVtQXJ0aWNsZS5hcHBlbmRDaGlsZCh1cGRhdGVCdXR0b24pXG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgZWRpdEZvcm0iLCJpbXBvcnQgdHJhdmVsQnVpbGRlciBmcm9tIFwiLi90cmF2ZWxlckRvbUJ1aWxkZXJcIlxuaW1wb3J0IHRyYXZlbGVyTGlzdCBmcm9tIFwiLi90cmF2ZWxlckxpc3RcIlxuXG50cmF2ZWxCdWlsZGVyLnRyYXZlbEJ1aWxkaW5nKCk7XG50cmF2ZWxlckxpc3QubGlzdGluZygpO1xuIiwiY29uc3QgdHJhdmVsZXJDb2xsZWN0aW9uID0ge1xuXG4gICAgZ2V0QWxsVHJhdmVscyAoKXtcbiAgICAgICAgcmV0dXJuIGZldGNoKFwiaHR0cDovL2xvY2FsaG9zdDo4MDg4L2ludGVyZXN0c1wiKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgfSxcbiAgICBwb3N0QWxsVHJhdmVscyh0cmF2ZWxUb1NhdmUpe1xuICAgICAgIHJldHVybiBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pbnRlcmVzdHNcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRyYXZlbFRvU2F2ZSlcbiAgICB9KVxuICB9LFxuICBkZWxldGVUcmF2ZWxzKHRyYXZlbElkKXtcbiAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pbnRlcmVzdHMvJHt0cmF2ZWxJZH1gLCB7XG4gICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgaGVhZGVyczoge1xuICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICB9XG4gIH0pXG4gfSxcblxuICAgIGdldFRyYXZlbCh0cmF2ZWxJZCl7XG4gICAgICAgIHJldHVybiBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo4MDg4L2ludGVyZXN0cy8ke3RyYXZlbElkfWApXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICB9LFxuICAgIGVkaXRUcmF2ZWxzKHRyYXZlbElkLCBldmVudFRvRWRpdCkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pbnRlcmVzdHMvJHt0cmF2ZWxJZH1gLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0sXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZXZlbnRUb0VkaXQpXG4gIH0pXG59LFxufVxuZXhwb3J0IGRlZmF1bHQgdHJhdmVsZXJDb2xsZWN0aW9uIiwiaW1wb3J0IHRyYXZlbGVyQ29sbGVjdGlvbiBmcm9tIFwiLi90cmF2ZWxlckNvbGxlY3Rpb25cIlxuaW1wb3J0IHRyYXZlbGVyTGlzdCBmcm9tIFwiLi90cmF2ZWxlckxpc3RcIlxuXG5jb25zdCB0cmF2ZWxCdWlsZGVyID0ge1xuICAgIHRyYXZlbEJ1aWxkaW5nKCl7XG5cbi8vICAgICAgRHJvcGRvd24gdG8gcGljayB3aGljaCBwbGFjZSB0aGUgcG9pbnQgb2YgaW50ZXJlc3QgaXMgbG9jYXRlZCBpblxuXG4gICAgICAgIGxldCBldmVudEhlYWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMlwiKTtcbiAgICAgICAgZXZlbnRIZWFkZXIudGV4dENvbnRlbnQgPSBcIlRlcm5hcnkgVHJhdmVsZXJcIjtcbiAgICAgICAgZXZlbnRIZWFkZXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJmb3JtVHJhdmVsX2lkXCIpXG5cbiAgICAgICAgLy8gTmFtZSBvZiB0aGUgcG9pbnQgb2YgaW50ZXJlc3RcbiAgICAgICAgbGV0IHRyYXZlbEZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpXG5cbiAgICAgICAgbGV0IHRyYXZlbE5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKVxuICAgICAgICB0cmF2ZWxOYW1lTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwidHJhdmVsX19uYW1lXCIpXG4gICAgICAgIGxldCBpbnB1dFRyYXZlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgaW5wdXRUcmF2ZWwuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJ0cmF2ZWxOYW1lXCIpXG4gICAgICAgIGlucHV0VHJhdmVsLnBsYWNlaG9sZGVyPSBcIk5hbWVcIlxuICAgICAgICBpbnB1dFRyYXZlbC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwidHJhdmVsLW5hbWVcIilcblxuXG4gICAgICAgIHRyYXZlbEZpZWxkLmFwcGVuZENoaWxkKHRyYXZlbE5hbWVMYWJlbClcbiAgICAgICAgdHJhdmVsRmllbGQuYXBwZW5kQ2hpbGQoaW5wdXRUcmF2ZWwpXG5cbiAgICAgICAgLy8gRGVzY3JpcHRpb24gb2YgdGhlIHBvaW50IG9mIGludGVyZXN0XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbkZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpXG5cbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIilcbiAgICAgICAgZGVzY3JpcHRpb25MYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkZXNjcmlwdGlvblwiKVxuICAgICAgICBsZXQgaW5wdXREZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxuICAgICAgICBpbnB1dERlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGVzY3JpcHRpb25cIilcbiAgICAgICAgaW5wdXREZXNjcmlwdGlvbi5wbGFjZWhvbGRlcj0gXCJEZXNjcmlwdGlvblwiXG4gICAgICAgIGlucHV0RGVzY3JpcHRpb24uc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcImRlc2NyaXB0aW9uXCIpXG5cbiAgICAgICAgZGVzY3JpcHRpb25GaWVsZC5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbkxhYmVsKVxuICAgICAgICBkZXNjcmlwdGlvbkZpZWxkLmFwcGVuZENoaWxkKGlucHV0RGVzY3JpcHRpb24pXG5cbiAgICAgICAgLy8gQ29zdCBvZiB2aXNpdGluZyB0aGUgcG9pbnQgb2YgaW50ZXJlc3RcbiAgICAgICAgbGV0IGNvc3RGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKVxuXG4gICAgICAgIGxldCBjb3N0TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIilcbiAgICAgICAgY29zdExhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImNvc3RcIilcbiAgICAgICAgbGV0IGlucHV0Q29zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKVxuICAgICAgICBpbnB1dENvc3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJjb3N0XCIpXG4gICAgICAgIGlucHV0Q29zdC5wbGFjZWhvbGRlcj0gXCJDb3N0XCJcbiAgICAgICAgaW5wdXRDb3N0LnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJjb3N0XCIpXG5cbiAgICAgICAgY29zdEZpZWxkLmFwcGVuZENoaWxkKGNvc3RMYWJlbClcbiAgICAgICAgY29zdEZpZWxkLmFwcGVuZENoaWxkKGlucHV0Q29zdClcblxuICAgICAgICBsZXQgcGxhY2VGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKVxuXG4gICAgICAgIGxldCBwbGFjZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKVxuICAgICAgICBwbGFjZUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImNvdW50cmllc1wiKVxuICAgICAgICBwbGFjZUxhYmVsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwicGxhY2VcIilcblxuICAgICAgICBwbGFjZUZpZWxkLmFwcGVuZENoaWxkKHBsYWNlTGFiZWwpXG4gICAgICAgIHBsYWNlTGFiZWwuYXBwZW5kQ2hpbGQobmV3IE9wdGlvbihcIkl0YWx5XCIsIFwiSXRhbHlcIikpO1xuICAgICAgICBwbGFjZUxhYmVsLmFwcGVuZENoaWxkKG5ldyBPcHRpb24oXCJTd2l0emVybGFuZFwiLCBcIlN3aXR6ZXJsYW5kXCIpKTtcbiAgICAgICAgcGxhY2VMYWJlbC5hcHBlbmRDaGlsZChuZXcgT3B0aW9uKFwiRnJhbmNlXCIsIFwiRnJhbmNlXCIpKTtcblxuICAgICAgICBsZXQgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICBzdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkFkZCBUcmF2ZWxcIlxuICAgICAgICBzdWJtaXRCdXR0b24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJ0cmF2ZWwtc2F2ZVwiKVxuXG4gICAgICAgIHN1Ym1pdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVBZGROZXdUcmF2ZWwpXG5cbiAgICAgICAgbGV0IHRyYXZlbEZvcm1GcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKVxuICAgICAgICB0cmF2ZWxGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQoZXZlbnRIZWFkZXIpXG4gICAgICAgIHRyYXZlbEZvcm1GcmFnbWVudC5hcHBlbmRDaGlsZCh0cmF2ZWxGaWVsZClcbiAgICAgICAgdHJhdmVsRm9ybUZyYWdtZW50LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uRmllbGQpXG4gICAgICAgIHRyYXZlbEZvcm1GcmFnbWVudC5hcHBlbmRDaGlsZChjb3N0RmllbGQpXG4gICAgICAgIHRyYXZlbEZvcm1GcmFnbWVudC5hcHBlbmRDaGlsZChwbGFjZUZpZWxkKVxuICAgICAgICB0cmF2ZWxGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQoc3VibWl0QnV0dG9uKVxuXG4gICAgICAgIGxldCBmb3JtQXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIub3V0cHV0XCIpXG4gICAgICAgIGZvcm1BcnRpY2xlLmFwcGVuZENoaWxkKHRyYXZlbEZvcm1GcmFnbWVudClcbiAgICAgICAgcmV0dXJuIGlucHV0VHJhdmVsXG4gICAgfSxcbiAgICBoYW5kbGVBZGROZXdUcmF2ZWwgKCkge1xuICAgICAgICBsZXQgaW5wdXROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0cmF2ZWxOYW1lXCIpLnZhbHVlXG4gICAgICAgIGxldCBpbnB1dFRyYXZlbERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKS52YWx1ZVxuICAgICAgICBsZXQgaW5wdXRUcmF2ZWxDb3N0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjb3N0XCIpLnZhbHVlXG4gICAgICAgIGxldCBpbnB1dFRyYXZlbFBsYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwbGFjZVwiKS52YWx1ZVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0VHJhdmVsRGVzY3JpcHRpb24pXG5cbiAgICAgICAgbGV0IG5ld1RyYXZlbCA9IHtcbiAgICAgICAgICAgIG5hbWU6IGlucHV0TmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbnB1dFRyYXZlbERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY29zdDogaW5wdXRUcmF2ZWxDb3N0LFxuICAgICAgICAgICAgcGxhY2U6IGlucHV0VHJhdmVsUGxhY2VcbiAgICAgICAgfVxuICAgICAgICB0cmF2ZWxlckNvbGxlY3Rpb24ucG9zdEFsbFRyYXZlbHMobmV3VHJhdmVsKVxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgdHJhdmVsZXJMaXN0Lmxpc3RpbmcoKVxuICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHRyYXZlbEJ1aWxkZXIiLCJpbXBvcnQgdHJhdmVsZXJDb2xsZWN0aW9uIGZyb20gXCIuL3RyYXZlbGVyQ29sbGVjdGlvblwiXG5pbXBvcnQgY3JlYXRlVHJhdmVscyBmcm9tIFwiLi90cmF2ZWxzXCJcblxuY29uc3QgdHJhdmVsZXJMaXN0ID0ge1xuICAgIGxpc3RpbmcoKXtcbiAgICAgICAgdHJhdmVsZXJDb2xsZWN0aW9uLmdldEFsbFRyYXZlbHMoKVxuICAgICAgICAudGhlbihhbGxUcmF2ZWxzID0+IHtcbiAgICAgICAgICAgIGxldCBldmVudERvY0ZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpXG4gICAgICAgICAgICBhbGxUcmF2ZWxzLmZvckVhY2godHJhdmVsSXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRyYXZlbEhUTUwgPSBjcmVhdGVUcmF2ZWxzLmNyZWF0aW5nVHJhdmVscyh0cmF2ZWxJdGVtKVxuICAgICAgICAgICAgICAgIGV2ZW50RG9jRnJhZ21lbnQuYXBwZW5kQ2hpbGQodHJhdmVsSFRNTClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGxUcmF2ZWxzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IG91dHB1dEFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRpc3BsYXlUcmF2ZWxzXCIpXG4gICAgICAgICAgICB3aGlsZSAob3V0cHV0QXJ0aWNsZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0QXJ0aWNsZS5yZW1vdmVDaGlsZChvdXRwdXRBcnRpY2xlLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3V0cHV0QXJ0aWNsZS5hcHBlbmRDaGlsZChldmVudERvY0ZyYWdtZW50KVxuXG4gICAgICAgIH0pXG4gICAgfVxufVxuZXhwb3J0IGRlZmF1bHQgdHJhdmVsZXJMaXN0IiwiaW1wb3J0IGVkaXRGb3JtIGZyb20gXCIuL2VkaXRGb3JtXCI7XG5pbXBvcnQgdHJhdmVsZXJDb2xsZWN0aW9uIGZyb20gXCIuL3RyYXZlbGVyQ29sbGVjdGlvblwiO1xuaW1wb3J0IHRyYXZlbGVyTGlzdCBmcm9tIFwiLi90cmF2ZWxlckxpc3RcIjtcblxuY29uc3QgY3JlYXRlVHJhdmVscyA9IHtcbiAgICBjcmVhdGluZ1RyYXZlbHModHJhdmVsT2JqZWN0KXtcbiAgICAgICAgbGV0IHRyYXZlbEFydGljbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7XG5cbiAgICAgICAgbGV0IHRyYXZlbE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIilcbiAgICAgICAgdHJhdmVsTmFtZS50ZXh0Q29udGVudCA9IHRyYXZlbE9iamVjdC5uYW1lO1xuXG4gICAgICAgIGxldCB0cmF2ZWxEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpXG4gICAgICAgIHRyYXZlbERlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdHJhdmVsT2JqZWN0LmRlc2NyaXB0aW9uO1xuXG4gICAgICAgIGxldCB0cmF2ZWxDb3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIilcbiAgICAgICAgdHJhdmVsQ29zdC50ZXh0Q29udGVudCA9IHRyYXZlbE9iamVjdC5jb3N0O1xuXG4gICAgICAgIGxldCB0cmF2ZWxQbGFjZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpXG4gICAgICAgIHRyYXZlbFBsYWNlLnRleHRDb250ZW50ID0gdHJhdmVsT2JqZWN0LnBsYWNlO1xuXG4gICAgICAgIGxldCB0cmF2ZWxSZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKVxuICAgICAgICB0cmF2ZWxSZXZpZXcudGV4dENvbnRlbnQgPSB0cmF2ZWxPYmplY3QucmV2aWV3O1xuXG4gICAgICAgIGxldCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICBlZGl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJFZGl0IEV2ZW50XCJcbiAgICAgICAgZWRpdEJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgZWRpdEV2ZW50LS0ke3RyYXZlbE9iamVjdC5pZH1gKVxuICAgICAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGxldCBhcnRpY2xlSUQgPSBldmVudC50YXJnZXQuaWRcbiAgICAgICAgY29uc29sZS5sb2coYXJ0aWNsZUlEKVxuICAgICAgICBsZXQgZXZlbnRJZCA9IGFydGljbGVJRC5zcGxpdChcIi0tXCIpWzFdXG4gICAgICAgIGNvbnNvbGUubG9nKGV2ZW50SWQpXG4gICAgdHJhdmVsZXJDb2xsZWN0aW9uLmdldFRyYXZlbChldmVudElkKVxuICAgIC50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgZWRpdEZvcm0uY3JlYXRlRWRpdEZvcm0ocmVzcG9uc2UpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgICAgICBsZXQgZGVsZXRlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKVxuICAgICAgICBkZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZSBFdmVudFwiXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgZGVsZXRlRXZlbnQtLSR7dHJhdmVsT2JqZWN0LmlkfWApXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnQpXG4gICAgICAgICAgICBsZXQgdHJhdmVsSWQgPSBldmVudC50YXJnZXQuaWQuc3BsaXQoXCItLVwiKVsxXVxuICAgICAgICAgICAgdHJhdmVsZXJDb2xsZWN0aW9uLmRlbGV0ZVRyYXZlbHModHJhdmVsSWQpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICB0cmF2ZWxlckxpc3QubGlzdGluZygpXG4gICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICB0cmF2ZWxBcnRpY2xlLmFwcGVuZENoaWxkKHRyYXZlbE5hbWUpXG4gICAgdHJhdmVsQXJ0aWNsZS5hcHBlbmRDaGlsZCh0cmF2ZWxEZXNjcmlwdGlvbilcbiAgICB0cmF2ZWxBcnRpY2xlLmFwcGVuZENoaWxkKHRyYXZlbENvc3QpXG4gICAgdHJhdmVsQXJ0aWNsZS5hcHBlbmRDaGlsZCh0cmF2ZWxQbGFjZSlcbiAgICB0cmF2ZWxBcnRpY2xlLmFwcGVuZENoaWxkKHRyYXZlbFJldmlldylcbiAgICB0cmF2ZWxBcnRpY2xlLmFwcGVuZENoaWxkKGVkaXRCdXR0b24pXG4gICAgdHJhdmVsQXJ0aWNsZS5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pXG5cblxuICAgICAgICByZXR1cm4gdHJhdmVsQXJ0aWNsZVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgY3JlYXRlVHJhdmVscyJdfQ==
