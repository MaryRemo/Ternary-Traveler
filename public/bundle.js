(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const editForm = {
  createEditForm(travelToEdit) {
    let travelNameField = document.createElement("p");
    let travelNameLabels = document.createElement("label");
    travelNameLabels.textContent = "Cost";
    let travelNameInput = document.createElement("input");
    travelNameInput.value = travelToEdit.cost;
    travelNameField.appendChild(travelNameLabels);
    travelNameField.appendChild(travelNameInput);
    let travelReviewField = document.createElement("p");
    let travelReviewLabel = document.createElement("label");
    travelReviewLabel.textContent = "Review";
    let travelReviewInput = document.createElement("input");
    travelReviewInput.value = travelToEdit.review;
    travelReviewField.appendChild(travelReviewLabel);
    travelReviewField.appendChild(travelReviewInput);
    let updateButton = document.createElement("button");
    updateButton.textContent = "Update";
    updateButton.addEventListener("click", () => {
      let editedEvents = {
        cost: travelNameInput.value,
        review: travelReviewInput.value,
        name: travelToEdit.name,
        description: travelToEdit.description,
        placeId: travelToEdit.placeId
      };

      _travelerCollection.default.editTravels(travelToEdit.id, editedEvents).then(response => {
        _travelerList.default.listing();

        console.log(response);
        let travelItemArticle = document.querySelector(".displayTravels");
        travelItemArticle.innerHTML = "";
      });
    });
    let eventItemArticle = document.querySelector(".displayTravels"); // while (eventItemArticle.firstChild) {
    //     eventItemArticle.removeChild(eventItemArticle.firstChild)
    // }

    eventItemArticle.innerHTML = "", eventItemArticle.appendChild(travelNameField);
    eventItemArticle.appendChild(travelReviewField);
    eventItemArticle.appendChild(updateButton);
  }

};
var _default = editForm;
exports.default = _default;

},{"./travelerCollection":3,"./travelerList":5}],2:[function(require,module,exports){
"use strict";

var _travelerDomBuilder = _interopRequireDefault(require("./travelerDomBuilder"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

_travelerDomBuilder.default.travelBuilding();

_travelerList.default.listing();

},{"./travelerDomBuilder":4,"./travelerList":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
const travelerCollection = {
  getAllTravels() {
    return fetch("http://localhost:8088/interests?_expand=place").then(response => response.json());
  },

  getAllTravel() {
    return fetch("http://localhost:8088/places").then(response => response.json());
  },

  postAllTravels(travelToSave) {
    return fetch("http://localhost:8088/interests", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(travelToSave)
    });
  },

  deleteTravels(eventlId) {
    return fetch(`http://localhost:8088/interests/${eventlId}`, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json"
      }
    });
  },

  getTravel(eventlId) {
    return fetch(`http://localhost:8088/interests/${eventlId}`).then(response => response.json());
  },

  editTravels(eventlId, eventToEdit) {
    return fetch(`http://localhost:8088/interests/${eventlId}`, {
      method: "PUT",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(eventToEdit)
    });
  }

};
var _default = travelerCollection;
exports.default = _default;

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const travelBuilder = {
  travelBuilding() {
    //      Dropdown to pick which place the point of interest is located in
    let eventHeader = document.createElement("h2");
    eventHeader.textContent = "Ternary Traveler";
    eventHeader.setAttribute("id", "formTravel_id"); // Name of the point of interest

    let travelField = document.createElement("fieldset");
    let travelNameLabel = document.createElement("label");
    travelNameLabel.setAttribute("for", "travel__name");
    let inputTravel = document.createElement("input");
    inputTravel.setAttribute("id", "travelName");
    inputTravel.placeholder = "Name";
    inputTravel.setAttribute("name", "travel-name");
    travelField.appendChild(travelNameLabel);
    travelField.appendChild(inputTravel); // Description of the point of interest

    let descriptionField = document.createElement("fieldset");
    let descriptionLabel = document.createElement("label");
    descriptionLabel.setAttribute("for", "description");
    let inputDescription = document.createElement("input");
    inputDescription.setAttribute("id", "description");
    inputDescription.placeholder = "Description";
    inputDescription.setAttribute("name", "description");
    descriptionField.appendChild(descriptionLabel);
    descriptionField.appendChild(inputDescription); // Cost of visiting the point of interest

    let costField = document.createElement("fieldset");
    let costLabel = document.createElement("label");
    costLabel.setAttribute("for", "cost");
    let inputCost = document.createElement("input");
    inputCost.setAttribute("id", "cost");
    inputCost.placeholder = "Cost";
    inputCost.setAttribute("name", "cost");
    costField.appendChild(costLabel);
    costField.appendChild(inputCost);
    let placeField = document.createElement("fieldset");
    let placeLabel = document.createElement("select");
    placeLabel.setAttribute("for", "countries");
    placeLabel.setAttribute("id", "place");

    _travelerCollection.default.getAllTravel().then(places => {
      places.forEach(place => {
        placeLabel.appendChild(new Option(place.name, place.id));
      });
    }); // placeLabel.appendChild(new Option("Switzerland", "Switzerland"));
    // placeLabel.appendChild(new Option("France", "France"));


    placeField.appendChild(placeLabel);
    let submitButton = document.createElement("button");
    submitButton.textContent = "Add Travel";
    submitButton.setAttribute("class", "travel-save");
    submitButton.addEventListener("click", this.handleAddNewTravel);
    let travelFormFragment = document.createDocumentFragment();
    travelFormFragment.appendChild(eventHeader);
    travelFormFragment.appendChild(travelField);
    travelFormFragment.appendChild(descriptionField);
    travelFormFragment.appendChild(costField);
    travelFormFragment.appendChild(placeField);
    travelFormFragment.appendChild(submitButton);
    let formArticle = document.querySelector(".output");
    formArticle.appendChild(travelFormFragment);
    return inputTravel;
  },

  handleAddNewTravel() {
    let inputName = document.querySelector("#travelName").value;
    let inputTravelDescription = document.querySelector("#description").value;
    let inputTravelCost = document.querySelector("#cost").value;
    let inputTravelPlace = document.querySelector("#place").value;
    console.log(inputTravelPlace, "hey");
    let newTravel = {
      name: inputName,
      description: inputTravelDescription,
      cost: inputTravelCost,
      placeId: inputTravelPlace
    };

    _travelerCollection.default.postAllTravels(newTravel).then(response => {
      _travelerList.default.listing();

      console.log(response);
    });
  }

};
var _default = travelBuilder;
exports.default = _default;

},{"./travelerCollection":3,"./travelerList":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travels = _interopRequireDefault(require("./travels"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const travelerList = {
  listing() {
    _travelerCollection.default.getAllTravels().then(allTravels => {
      let eventDocFragment = document.createDocumentFragment();
      allTravels.forEach(travelItem => {
        let travelHTML = _travels.default.creatingTravels(travelItem);

        eventDocFragment.appendChild(travelHTML);
        console.log(allTravels);
      });
      let outputArticle = document.querySelector(".displayTravels");

      while (outputArticle.firstChild) {
        outputArticle.removeChild(outputArticle.firstChild);
      }

      outputArticle.appendChild(eventDocFragment);
    });
  }

};
var _default = travelerList;
exports.default = _default;

},{"./travelerCollection":3,"./travels":6}],6:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _editForm = _interopRequireDefault(require("./editForm"));

var _travelerCollection = _interopRequireDefault(require("./travelerCollection"));

var _travelerList = _interopRequireDefault(require("./travelerList"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const createTravels = {
  creatingTravels(travelObject) {
    let travelArticle = document.createElement("fieldset");
    let travelName = document.createElement("h3");
    travelName.textContent = travelObject.name;
    let travelDescription = document.createElement("section");
    travelDescription.textContent = travelObject.description;
    let travelCost = document.createElement("section");
    travelCost.textContent = travelObject.cost;
    let travelPlace = document.createElement("section");
    travelPlace.textContent = travelObject.place;
    let travelReview = document.createElement("section");
    travelReview.textContent = travelObject.review;
    let editButton = document.createElement("button");
    editButton.textContent = "Edit Event";
    editButton.setAttribute("id", `editEvent--${travelObject.id}`);
    editButton.addEventListener("click", () => {
      let articleID = event.target.id;
      console.log(articleID);
      let travelEditId = articleID.split("--")[1];
      console.log(travelEditId);

      _travelerCollection.default.getTravel(travelEditId).then(response => {
        _editForm.default.createEditForm(response);
      });
    });
    let deleteButton = document.createElement("button");
    deleteButton.textContent = "Delete Event";
    deleteButton.setAttribute("id", `deleteEvent--${travelObject.id}`);
    deleteButton.addEventListener("click", () => {
      console.log(event);
      alert("Are you sure you want to delete?");
      let deleteTravelId = event.target.id.split("--")[1];

      _travelerCollection.default.deleteTravels(deleteTravelId).then(response => {
        _travelerList.default.listing();

        console.log(response);
      });
    });
    travelArticle.appendChild(travelName);
    travelArticle.appendChild(travelDescription);
    travelArticle.appendChild(travelCost);
    travelArticle.appendChild(travelPlace);
    travelArticle.appendChild(travelReview);
    travelArticle.appendChild(editButton);
    travelArticle.appendChild(deleteButton);
    return travelArticle;
  }

};
var _default = createTravels;
exports.default = _default;

},{"./editForm":1,"./travelerCollection":3,"./travelerList":5}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIuLi9zY3JpcHRzL2VkaXRGb3JtLmpzIiwiLi4vc2NyaXB0cy9tYWluLmpzIiwiLi4vc2NyaXB0cy90cmF2ZWxlckNvbGxlY3Rpb24uanMiLCIuLi9zY3JpcHRzL3RyYXZlbGVyRG9tQnVpbGRlci5qcyIsIi4uL3NjcmlwdHMvdHJhdmVsZXJMaXN0LmpzIiwiLi4vc2NyaXB0cy90cmF2ZWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7OztBQ0FBOztBQUNBOzs7O0FBRUEsTUFBTSxRQUFRLEdBQUc7QUFDYixFQUFBLGNBQWMsQ0FBRSxZQUFGLEVBQWdCO0FBQzFCLFFBQUksZUFBZSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLEdBQXZCLENBQXRCO0FBQ0EsUUFBSSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUF2QjtBQUNBLElBQUEsZ0JBQWdCLENBQUMsV0FBakIsR0FBK0IsTUFBL0I7QUFDQSxRQUFJLGVBQWUsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUF0QjtBQUNBLElBQUEsZUFBZSxDQUFDLEtBQWhCLEdBQXdCLFlBQVksQ0FBQyxJQUFyQztBQUVBLElBQUEsZUFBZSxDQUFDLFdBQWhCLENBQTRCLGdCQUE1QjtBQUNBLElBQUEsZUFBZSxDQUFDLFdBQWhCLENBQTRCLGVBQTVCO0FBRUEsUUFBSSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixHQUF2QixDQUF4QjtBQUNBLFFBQUksaUJBQWlCLEdBQUcsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsT0FBdkIsQ0FBeEI7QUFDQSxJQUFBLGlCQUFpQixDQUFDLFdBQWxCLEdBQWdDLFFBQWhDO0FBQ0EsUUFBSSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixPQUF2QixDQUF4QjtBQUNBLElBQUEsaUJBQWlCLENBQUMsS0FBbEIsR0FBMEIs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QWEsRUFBYixDQUFnQixLQUFoQixDQUFzQixJQUF0QixFQUE0QixDQUE1QixDQUFyQjs7QUFDQSxrQ0FBbUIsYUFBbkIsQ0FBaUMsY0FBakMsRUFDUCxJQURPLENBQ0YsUUFBUSxJQUFJO0FBQ1gsOEJBQWEsT0FBYjs7QUFDQSxRQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWjtBQUNGLE9BSkc7QUFLUCxLQVRHO0FBV0osSUFBQSxhQUFhLENBQUMsV0FBZCxDQUEwQixVQUExQjtBQUNBLElBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsaUJBQTFCO0FBQ0EsSUFBQSxhQUFhLENBQUMsV0FBZCxDQUEwQixVQUExQjtBQUNBLElBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsV0FBMUI7QUFDQSxJQUFBLGFBQWEsQ0FBQyxXQUFkLENBQTBCLFlBQTFCO0FBQ0EsSUFBQSxhQUFhLENBQUMsV0FBZCxDQUEwQixVQUExQjtBQUNBLElBQUEsYUFBYSxDQUFDLFdBQWQsQ0FBMEIsWUFBMUI7QUFHSSxXQUFPLGFBQVA7QUFDSDs7QUF6RGlCLENBQXRCO2VBNERlLGEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgdHJhdmVsZXJDb2xsZWN0aW9uIGZyb20gXCIuL3RyYXZlbGVyQ29sbGVjdGlvblwiXG5pbXBvcnQgdHJhdmVsZXJMaXN0IGZyb20gXCIuL3RyYXZlbGVyTGlzdFwiXG5cbmNvbnN0IGVkaXRGb3JtID0ge1xuICAgIGNyZWF0ZUVkaXRGb3JtICh0cmF2ZWxUb0VkaXQpIHtcbiAgICAgICAgbGV0IHRyYXZlbE5hbWVGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpXG4gICAgICAgIGxldCB0cmF2ZWxOYW1lTGFiZWxzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpXG4gICAgICAgIHRyYXZlbE5hbWVMYWJlbHMudGV4dENvbnRlbnQgPSBcIkNvc3RcIlxuICAgICAgICBsZXQgdHJhdmVsTmFtZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpXG4gICAgICAgIHRyYXZlbE5hbWVJbnB1dC52YWx1ZSA9IHRyYXZlbFRvRWRpdC5jb3N0XG5cbiAgICAgICAgdHJhdmVsTmFtZUZpZWxkLmFwcGVuZENoaWxkKHRyYXZlbE5hbWVMYWJlbHMpXG4gICAgICAgIHRyYXZlbE5hbWVGaWVsZC5hcHBlbmRDaGlsZCh0cmF2ZWxOYW1lSW5wdXQpXG5cbiAgICAgICAgbGV0IHRyYXZlbFJldmlld0ZpZWxkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIilcbiAgICAgICAgbGV0IHRyYXZlbFJldmlld0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpXG4gICAgICAgIHRyYXZlbFJldmlld0xhYmVsLnRleHRDb250ZW50ID0gXCJSZXZpZXdcIlxuICAgICAgICBsZXQgdHJhdmVsUmV2aWV3SW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICAgICAgdHJhdmVsUmV2aWV3SW5wdXQudmFsdWUgPSB0cmF2ZWxUb0VkaXQucmV2aWV3XG5cbiAgICAgICAgdHJhdmVsUmV2aWV3RmllbGQuYXBwZW5kQ2hpbGQodHJhdmVsUmV2aWV3TGFiZWwpXG4gICAgICAgIHRyYXZlbFJldmlld0ZpZWxkLmFwcGVuZENoaWxkKHRyYXZlbFJldmlld0lucHV0KVxuXG4gICAgICAgIGxldCB1cGRhdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIHVwZGF0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiVXBkYXRlXCJcblxuICAgICAgICB1cGRhdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIGxldCBlZGl0ZWRFdmVudHMgPSB7XG4gICAgICAgICAgICAgICAgY29zdDogdHJhdmVsTmFtZUlucHV0LnZhbHVlLFxuICAgICAgICAgICAgICAgIHJldmlldzogdHJhdmVsUmV2aWV3SW5wdXQudmFsdWUsXG4gICAgICAgICAgICAgICAgbmFtZTogdHJhdmVsVG9FZGl0Lm5hbWUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRyYXZlbFRvRWRpdC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBwbGFjZUlkOiB0cmF2ZWxUb0VkaXQucGxhY2VJZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHJhdmVsZXJDb2xsZWN0aW9uLmVkaXRUcmF2ZWxzKHRyYXZlbFRvRWRpdC5pZCwgZWRpdGVkRXZlbnRzKVxuICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgIHRyYXZlbGVyTGlzdC5saXN0aW5nKClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSlcblxuICAgICAgICAgICAgICAgIGxldCB0cmF2ZWxJdGVtQXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheVRyYXZlbHNcIilcbiAgICAgICAgICAgICAgICB0cmF2ZWxJdGVtQXJ0aWNsZS5pbm5lckhUTUwgPSBcIlwiXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBsZXQgZXZlbnRJdGVtQXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheVRyYXZlbHNcIilcblxuICAgICAgICAvLyB3aGlsZSAoZXZlbnRJdGVtQXJ0aWNsZS5maXJzdENoaWxkKSB7XG4gICAgICAgIC8vICAgICBldmVudEl0ZW1BcnRpY2xlLnJlbW92ZUNoaWxkKGV2ZW50SXRlbUFydGljbGUuZmlyc3RDaGlsZClcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIGV2ZW50SXRlbUFydGljbGUuaW5uZXJIVE1MID0gXCJcIixcbiAgICAgICAgZXZlbnRJdGVtQXJ0aWNsZS5hcHBlbmRDaGlsZCh0cmF2ZWxOYW1lRmllbGQpXG4gICAgICAgIGV2ZW50SXRlbUFydGljbGUuYXBwZW5kQ2hpbGQodHJhdmVsUmV2aWV3RmllbGQpXG4gICAgICAgIGV2ZW50SXRlbUFydGljbGUuYXBwZW5kQ2hpbGQodXBkYXRlQnV0dG9uKVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IGVkaXRGb3JtIiwiaW1wb3J0IHRyYXZlbEJ1aWxkZXIgZnJvbSBcIi4vdHJhdmVsZXJEb21CdWlsZGVyXCJcbmltcG9ydCB0cmF2ZWxlckxpc3QgZnJvbSBcIi4vdHJhdmVsZXJMaXN0XCJcblxudHJhdmVsQnVpbGRlci50cmF2ZWxCdWlsZGluZygpO1xudHJhdmVsZXJMaXN0Lmxpc3RpbmcoKTtcbiIsImNvbnN0IHRyYXZlbGVyQ29sbGVjdGlvbiA9IHtcblxuICAgIGdldEFsbFRyYXZlbHMgKCl7XG4gICAgICAgIHJldHVybiBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pbnRlcmVzdHM/X2V4cGFuZD1wbGFjZVwiKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgfSxcbiAgICBnZXRBbGxUcmF2ZWwgKCl7XG4gICAgICAgIHJldHVybiBmZXRjaChcImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9wbGFjZXNcIilcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIH0sXG4gICAgcG9zdEFsbFRyYXZlbHModHJhdmVsVG9TYXZlKXtcbiAgICAgICByZXR1cm4gZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwODgvaW50ZXJlc3RzXCIsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh0cmF2ZWxUb1NhdmUpXG4gICAgfSlcbiAgfSxcbiAgZGVsZXRlVHJhdmVscyhldmVudGxJZCl7XG4gICAgcmV0dXJuIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODgvaW50ZXJlc3RzLyR7ZXZlbnRsSWR9YCwge1xuICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgIGhlYWRlcnM6IHtcbiAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgfVxuICB9KVxuIH0sXG5cbiAgICBnZXRUcmF2ZWwoZXZlbnRsSWQpe1xuICAgICAgICByZXR1cm4gZmV0Y2goYGh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9pbnRlcmVzdHMvJHtldmVudGxJZH1gKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgfSxcbiAgICBlZGl0VHJhdmVscyhldmVudGxJZCwgZXZlbnRUb0VkaXQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjgwODgvaW50ZXJlc3RzLyR7ZXZlbnRsSWR9YCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9LFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGV2ZW50VG9FZGl0KVxuICB9KVxufSxcbn1cbmV4cG9ydCBkZWZhdWx0IHRyYXZlbGVyQ29sbGVjdGlvbiIsImltcG9ydCB0cmF2ZWxlckNvbGxlY3Rpb24gZnJvbSBcIi4vdHJhdmVsZXJDb2xsZWN0aW9uXCJcbmltcG9ydCB0cmF2ZWxlckxpc3QgZnJvbSBcIi4vdHJhdmVsZXJMaXN0XCJcblxuY29uc3QgdHJhdmVsQnVpbGRlciA9IHtcbiAgICB0cmF2ZWxCdWlsZGluZygpe1xuXG4vLyAgICAgIERyb3Bkb3duIHRvIHBpY2sgd2hpY2ggcGxhY2UgdGhlIHBvaW50IG9mIGludGVyZXN0IGlzIGxvY2F0ZWQgaW5cblxuICAgICAgICBsZXQgZXZlbnRIZWFkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XG4gICAgICAgIGV2ZW50SGVhZGVyLnRleHRDb250ZW50ID0gXCJUZXJuYXJ5IFRyYXZlbGVyXCI7XG4gICAgICAgIGV2ZW50SGVhZGVyLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZm9ybVRyYXZlbF9pZFwiKVxuXG4gICAgICAgIC8vIE5hbWUgb2YgdGhlIHBvaW50IG9mIGludGVyZXN0XG4gICAgICAgIGxldCB0cmF2ZWxGaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKVxuXG4gICAgICAgIGxldCB0cmF2ZWxOYW1lTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIilcbiAgICAgICAgdHJhdmVsTmFtZUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInRyYXZlbF9fbmFtZVwiKVxuICAgICAgICBsZXQgaW5wdXRUcmF2ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgIGlucHV0VHJhdmVsLnNldEF0dHJpYnV0ZShcImlkXCIsIFwidHJhdmVsTmFtZVwiKVxuICAgICAgICBpbnB1dFRyYXZlbC5wbGFjZWhvbGRlcj0gXCJOYW1lXCJcbiAgICAgICAgaW5wdXRUcmF2ZWwuc2V0QXR0cmlidXRlKFwibmFtZVwiLCBcInRyYXZlbC1uYW1lXCIpXG5cblxuICAgICAgICB0cmF2ZWxGaWVsZC5hcHBlbmRDaGlsZCh0cmF2ZWxOYW1lTGFiZWwpXG4gICAgICAgIHRyYXZlbEZpZWxkLmFwcGVuZENoaWxkKGlucHV0VHJhdmVsKVxuXG4gICAgICAgIC8vIERlc2NyaXB0aW9uIG9mIHRoZSBwb2ludCBvZiBpbnRlcmVzdFxuICAgICAgICBsZXQgZGVzY3JpcHRpb25GaWVsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKVxuXG4gICAgICAgIGxldCBkZXNjcmlwdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpXG4gICAgICAgIGRlc2NyaXB0aW9uTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZGVzY3JpcHRpb25cIilcbiAgICAgICAgbGV0IGlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICAgICAgaW5wdXREZXNjcmlwdGlvbi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImRlc2NyaXB0aW9uXCIpXG4gICAgICAgIGlucHV0RGVzY3JpcHRpb24ucGxhY2Vob2xkZXI9IFwiRGVzY3JpcHRpb25cIlxuICAgICAgICBpbnB1dERlc2NyaXB0aW9uLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgXCJkZXNjcmlwdGlvblwiKVxuXG4gICAgICAgIGRlc2NyaXB0aW9uRmllbGQuYXBwZW5kQ2hpbGQoZGVzY3JpcHRpb25MYWJlbClcbiAgICAgICAgZGVzY3JpcHRpb25GaWVsZC5hcHBlbmRDaGlsZChpbnB1dERlc2NyaXB0aW9uKVxuXG4gICAgICAgIC8vIENvc3Qgb2YgdmlzaXRpbmcgdGhlIHBvaW50IG9mIGludGVyZXN0XG4gICAgICAgIGxldCBjb3N0RmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIilcblxuICAgICAgICBsZXQgY29zdExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpXG4gICAgICAgIGNvc3RMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJjb3N0XCIpXG4gICAgICAgIGxldCBpbnB1dENvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIilcbiAgICAgICAgaW5wdXRDb3N0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiY29zdFwiKVxuICAgICAgICBpbnB1dENvc3QucGxhY2Vob2xkZXI9IFwiQ29zdFwiXG4gICAgICAgIGlucHV0Q29zdC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIFwiY29zdFwiKVxuXG4gICAgICAgIGNvc3RGaWVsZC5hcHBlbmRDaGlsZChjb3N0TGFiZWwpXG4gICAgICAgIGNvc3RGaWVsZC5hcHBlbmRDaGlsZChpbnB1dENvc3QpXG5cbiAgICAgICAgbGV0IHBsYWNlRmllbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIilcblxuICAgICAgICBsZXQgcGxhY2VMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIilcbiAgICAgICAgcGxhY2VMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJjb3VudHJpZXNcIilcbiAgICAgICAgcGxhY2VMYWJlbC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcInBsYWNlXCIpXG5cbiAgICAgICAgdHJhdmVsZXJDb2xsZWN0aW9uLmdldEFsbFRyYXZlbCgpXG4gICAgICAgIC50aGVuKHBsYWNlcyA9PiB7XG4gICAgICAgICAgICBwbGFjZXMuZm9yRWFjaChwbGFjZSA9PiB7XG4gICAgICAgICAgICAgcGxhY2VMYWJlbC5hcHBlbmRDaGlsZChuZXcgT3B0aW9uKHBsYWNlLm5hbWUsIHBsYWNlLmlkKSk7XG4gICAgICAgIH0pXG5cbiAgICB9KVxuICAgICAgLy8gcGxhY2VMYWJlbC5hcHBlbmRDaGlsZChuZXcgT3B0aW9uKFwiU3dpdHplcmxhbmRcIiwgXCJTd2l0emVybGFuZFwiKSk7XG4gICAgICAgIC8vIHBsYWNlTGFiZWwuYXBwZW5kQ2hpbGQobmV3IE9wdGlvbihcIkZyYW5jZVwiLCBcIkZyYW5jZVwiKSk7XG4gICAgICAgIHBsYWNlRmllbGQuYXBwZW5kQ2hpbGQocGxhY2VMYWJlbClcbiAgICAgICAgbGV0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIilcbiAgICAgICAgc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJBZGQgVHJhdmVsXCJcbiAgICAgICAgc3VibWl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidHJhdmVsLXNhdmVcIilcblxuICAgICAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlQWRkTmV3VHJhdmVsKVxuXG4gICAgICAgIGxldCB0cmF2ZWxGb3JtRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICAgICAgdHJhdmVsRm9ybUZyYWdtZW50LmFwcGVuZENoaWxkKGV2ZW50SGVhZGVyKVxuICAgICAgICB0cmF2ZWxGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQodHJhdmVsRmllbGQpXG4gICAgICAgIHRyYXZlbEZvcm1GcmFnbWVudC5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbkZpZWxkKVxuICAgICAgICB0cmF2ZWxGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQoY29zdEZpZWxkKVxuICAgICAgICB0cmF2ZWxGb3JtRnJhZ21lbnQuYXBwZW5kQ2hpbGQocGxhY2VGaWVsZClcbiAgICAgICAgdHJhdmVsRm9ybUZyYWdtZW50LmFwcGVuZENoaWxkKHN1Ym1pdEJ1dHRvbilcblxuICAgICAgICBsZXQgZm9ybUFydGljbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm91dHB1dFwiKVxuICAgICAgICBmb3JtQXJ0aWNsZS5hcHBlbmRDaGlsZCh0cmF2ZWxGb3JtRnJhZ21lbnQpXG4gICAgICAgIHJldHVybiBpbnB1dFRyYXZlbFxuICAgIH0sXG4gICAgaGFuZGxlQWRkTmV3VHJhdmVsICgpIHtcbiAgICAgICAgbGV0IGlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdHJhdmVsTmFtZVwiKS52YWx1ZVxuICAgICAgICBsZXQgaW5wdXRUcmF2ZWxEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIikudmFsdWVcbiAgICAgICAgbGV0IGlucHV0VHJhdmVsQ29zdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY29zdFwiKS52YWx1ZVxuICAgICAgICBsZXQgaW5wdXRUcmF2ZWxQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxhY2VcIikudmFsdWVcblxuXG4gICAgICAgIGNvbnNvbGUubG9nKGlucHV0VHJhdmVsUGxhY2UsIFwiaGV5XCIpXG5cbiAgICAgICAgbGV0IG5ld1RyYXZlbCA9IHtcbiAgICAgICAgICAgIG5hbWU6IGlucHV0TmFtZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBpbnB1dFRyYXZlbERlc2NyaXB0aW9uLFxuICAgICAgICAgICAgY29zdDogaW5wdXRUcmF2ZWxDb3N0LFxuICAgICAgICAgICAgcGxhY2VJZDogaW5wdXRUcmF2ZWxQbGFjZVxuICAgICAgICB9XG4gICAgICAgIHRyYXZlbGVyQ29sbGVjdGlvbi5wb3N0QWxsVHJhdmVscyhuZXdUcmF2ZWwpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICB0cmF2ZWxlckxpc3QubGlzdGluZygpXG4gICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKVxuICAgICAgICB9KVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdHJhdmVsQnVpbGRlciIsImltcG9ydCB0cmF2ZWxlckNvbGxlY3Rpb24gZnJvbSBcIi4vdHJhdmVsZXJDb2xsZWN0aW9uXCJcbmltcG9ydCBjcmVhdGVUcmF2ZWxzIGZyb20gXCIuL3RyYXZlbHNcIlxuXG5jb25zdCB0cmF2ZWxlckxpc3QgPSB7XG4gICAgbGlzdGluZygpe1xuICAgICAgICB0cmF2ZWxlckNvbGxlY3Rpb24uZ2V0QWxsVHJhdmVscygpXG4gICAgICAgIC50aGVuKGFsbFRyYXZlbHMgPT4ge1xuICAgICAgICAgICAgbGV0IGV2ZW50RG9jRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KClcbiAgICAgICAgICAgIGFsbFRyYXZlbHMuZm9yRWFjaCh0cmF2ZWxJdGVtID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdHJhdmVsSFRNTCA9IGNyZWF0ZVRyYXZlbHMuY3JlYXRpbmdUcmF2ZWxzKHRyYXZlbEl0ZW0pXG4gICAgICAgICAgICAgICAgZXZlbnREb2NGcmFnbWVudC5hcHBlbmRDaGlsZCh0cmF2ZWxIVE1MKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbFRyYXZlbHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgb3V0cHV0QXJ0aWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheVRyYXZlbHNcIilcbiAgICAgICAgICAgIHdoaWxlIChvdXRwdXRBcnRpY2xlLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRBcnRpY2xlLnJlbW92ZUNoaWxkKG91dHB1dEFydGljbGUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXRwdXRBcnRpY2xlLmFwcGVuZENoaWxkKGV2ZW50RG9jRnJhZ21lbnQpXG5cbiAgICAgICAgfSlcbiAgICB9XG59XG5leHBvcnQgZGVmYXVsdCB0cmF2ZWxlckxpc3QiLCJpbXBvcnQgZWRpdEZvcm0gZnJvbSBcIi4vZWRpdEZvcm1cIjtcbmltcG9ydCB0cmF2ZWxlckNvbGxlY3Rpb24gZnJvbSBcIi4vdHJhdmVsZXJDb2xsZWN0aW9uXCI7XG5pbXBvcnQgdHJhdmVsZXJMaXN0IGZyb20gXCIuL3RyYXZlbGVyTGlzdFwiO1xuXG5jb25zdCBjcmVhdGVUcmF2ZWxzID0ge1xuICAgIGNyZWF0aW5nVHJhdmVscyh0cmF2ZWxPYmplY3Qpe1xuICAgICAgICBsZXQgdHJhdmVsQXJ0aWNsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcblxuICAgICAgICBsZXQgdHJhdmVsTmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoM1wiKVxuICAgICAgICB0cmF2ZWxOYW1lLnRleHRDb250ZW50ID0gdHJhdmVsT2JqZWN0Lm5hbWU7XG5cbiAgICAgICAgbGV0IHRyYXZlbERlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIilcbiAgICAgICAgdHJhdmVsRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0cmF2ZWxPYmplY3QuZGVzY3JpcHRpb247XG5cbiAgICAgICAgbGV0IHRyYXZlbENvc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VjdGlvblwiKVxuICAgICAgICB0cmF2ZWxDb3N0LnRleHRDb250ZW50ID0gdHJhdmVsT2JqZWN0LmNvc3Q7XG5cbiAgICAgICAgbGV0IHRyYXZlbFBsYWNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlY3Rpb25cIilcbiAgICAgICAgdHJhdmVsUGxhY2UudGV4dENvbnRlbnQgPSB0cmF2ZWxPYmplY3QucGxhY2U7XG5cbiAgICAgICAgbGV0IHRyYXZlbFJldmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWN0aW9uXCIpXG4gICAgICAgIHRyYXZlbFJldmlldy50ZXh0Q29udGVudCA9IHRyYXZlbE9iamVjdC5yZXZpZXc7XG5cbiAgICAgICAgbGV0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIGVkaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIkVkaXQgRXZlbnRcIlxuICAgICAgICBlZGl0QnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBlZGl0RXZlbnQtLSR7dHJhdmVsT2JqZWN0LmlkfWApXG4gICAgICAgIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgbGV0IGFydGljbGVJRCA9IGV2ZW50LnRhcmdldC5pZFxuICAgICAgICBjb25zb2xlLmxvZyhhcnRpY2xlSUQpXG4gICAgICAgIGxldCB0cmF2ZWxFZGl0SWQgPSBhcnRpY2xlSUQuc3BsaXQoXCItLVwiKVsxXVxuICAgICAgICBjb25zb2xlLmxvZyh0cmF2ZWxFZGl0SWQpXG4gICAgdHJhdmVsZXJDb2xsZWN0aW9uLmdldFRyYXZlbCh0cmF2ZWxFZGl0SWQpXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICBlZGl0Rm9ybS5jcmVhdGVFZGl0Rm9ybShyZXNwb25zZSlcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgICAgIGxldCBkZWxldGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRlIEV2ZW50XCJcbiAgICAgICAgZGVsZXRlQnV0dG9uLnNldEF0dHJpYnV0ZShcImlkXCIsIGBkZWxldGVFdmVudC0tJHt0cmF2ZWxPYmplY3QuaWR9YClcbiAgICAgICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldmVudClcbiAgICAgICAgICAgIGFsZXJ0KFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZT9cIilcbiAgICAgICAgICAgIGxldCBkZWxldGVUcmF2ZWxJZCA9IGV2ZW50LnRhcmdldC5pZC5zcGxpdChcIi0tXCIpWzFdXG4gICAgICAgICAgICB0cmF2ZWxlckNvbGxlY3Rpb24uZGVsZXRlVHJhdmVscyhkZWxldGVUcmF2ZWxJZClcbiAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgIHRyYXZlbGVyTGlzdC5saXN0aW5nKClcbiAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpXG4gICAgICAgIH0pXG4gICAgfSlcblxuICAgIHRyYXZlbEFydGljbGUuYXBwZW5kQ2hpbGQodHJhdmVsTmFtZSlcbiAgICB0cmF2ZWxBcnRpY2xlLmFwcGVuZENoaWxkKHRyYXZlbERlc2NyaXB0aW9uKVxuICAgIHRyYXZlbEFydGljbGUuYXBwZW5kQ2hpbGQodHJhdmVsQ29zdClcbiAgICB0cmF2ZWxBcnRpY2xlLmFwcGVuZENoaWxkKHRyYXZlbFBsYWNlKVxuICAgIHRyYXZlbEFydGljbGUuYXBwZW5kQ2hpbGQodHJhdmVsUmV2aWV3KVxuICAgIHRyYXZlbEFydGljbGUuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbilcbiAgICB0cmF2ZWxBcnRpY2xlLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbilcblxuXG4gICAgICAgIHJldHVybiB0cmF2ZWxBcnRpY2xlXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVUcmF2ZWxzIl19
